function getChildren(t,i){for(let e of t.children)if(e.className===i)return e;return null}function parseExpression(expression,occupied){if("${full}"===expression)return occupied;const match=expression.replaceAll("full",occupied).match(/^\$\{([<>=]{1,2}.+)\?(.+):(.+)}$/);if(match)return eval(`occupied${match[1]} ? ${match[2]} : ${match[3]}`);throw new Error(`Invalid expression "${expression}"`)}function extractHeight(t,i,e){const s=i.endsWith("%")?t*(Number(i.slice(0,-1))/100):Number(i);return(e=e.replaceAll("cwidth",s)).startsWith("${")&&e.endsWith("}")?parseExpression(e,t):e}document.addEventListener("DOMContentLoaded",(()=>{customElements.define("tabs",class extends HTMLElement{constructor(){super(),this.options={id:this.getAttribute("id")||"",index:this.getAttribute("index")||""};const t=this.options.id,i=this.options.index;let e=getChildren(this,"_tpl").innerHTML.trim().replace(/^(<br>)|(<br>)$/g,""),s="",n="",l=0;e.replace(/{tabs-item([^}]*)}([\s\S]*?){\/tabs-item}/g,(function(e,r,o){l+=1;let a="";""!=i&&null!=i?l==i&&(a="active"):1==l&&(a="active"),s+=`\n                         <li class="tab ${a}"><button type="button" data-href="#${t}-${l}">${r}</button></li>\n                    `,n+=`\n                        <div class="tab-item-content  ${a}" id="${t}-${l}">\n                         ${o.trim().replace(/^(<br>)|(<br>)$/g,"")}\n                           <button type="button" class="tab-to-top" aria-label="scroll to top"><i class="icon-arrow-up"></i></button>\n                        </div>\n                    `}));let r=`\n                <div class="tabs" id="${this.options.id}">\n                   <ul class="nav-tabs">${s}</ul>\n                   <div class="tab-contents">${n}</div>\n                </div>\n        \n            `;this.innerHTML=r}}),customElements.define("dotted",class extends HTMLElement{constructor(){super(),this.startColor=this.getAttribute("begin")||"#ff6c6c",this.endColor=this.getAttribute("end")||"#1989fa",this.innerHTML=`\n                <span class="tool_dotted" style="background-image: repeating-linear-gradient(-45deg, ${this.startColor} 0, ${this.startColor} 20%, transparent 0, transparent 25%, ${this.endColor} 0, ${this.endColor} 45%, transparent 0, transparent 50%)"></span>\n            `}}),customElements.define("progress",class extends HTMLElement{constructor(){super(),this.options={percentage:/^\d{1,3}%$/.test(this.getAttribute("pct"))?this.getAttribute("pct"):"50%",color:this.getAttribute("color")||"#ff6c6c"},this.innerHTML=`\n                    <span class="tool_progress">\n                        <div class="tool_progress__strip">\n                            <div class="tool_progress__strip-percent" style="width: ${this.options.percentage}; background: ${this.options.color};"></div>\n                        </div>\n                        <div class="tool_progress__percentage">${this.options.percentage}</div>\n                    </span>\n                `}}),customElements.define("sign",class extends HTMLElement{constructor(){super(),this.options={type:this.getAttribute("type"),content:this.innerHTML},this.render()}render(){this.innerHTML=`<span class="${this.options.type}">${this.options.content}</span>`}}),customElements.define("bilibili",class extends HTMLElement{constructor(){super(),this.options={bvid:this.getAttribute("bvid"),page:+(this.getAttribute("page")||"1"),width:this.getAttribute("width")||"100%",height:this.getAttribute("height")||"500",autoplay:this.getAttribute("autoplay")||0},this.render()}render(){if(!this.options.bvid)return this.innerHTML="请填写正确的bvid";const t=extractHeight(this.parentElement.offsetWidth,this.options.width,this.options.height);this.setAttribute("height",t),this.innerHTML=`\n                    <iframe class="iframe-dom" allowfullscreen="true" scrolling="no" border="0" frameborder="no" framespacing="0" class="tool_vplayer" src="//player.bilibili.com/player.html?bvid=${this.options.bvid}&page=${this.options.page}&autoplay=${this.options.autoplay}" style="width:${this.options.width}; height:${t}px;"></iframe>`}}),customElements.define("pdf",class extends HTMLElement{constructor(){super(),this.options={src:this.getAttribute("src")||"",width:this.getAttribute("width")||"100%",height:this.getAttribute("height")||"500"},this.render()}render(){if(!this.options.src)return this.innerHTML="请填写正确的pdf链接";const t=extractHeight(this.parentElement.offsetWidth,this.options.width,this.options.height);this.setAttribute("height",t),this.innerHTML=`\n                    <div class="tool_pdf">\n                        <iframe class="iframe-dom" src="${this.options.src}" style="width:${this.options.width}; height:${t}px;"></iframe>\n                    </div>`}}),customElements.define("introduction-card",class extends HTMLElement{constructor(){super(),this.options={link:this.getAttribute("link")||"https://0206.ink/",img:this.getAttribute("img"),tip:this.getAttribute("tip")||"小标题",cardTitle:this.getAttribute("cardTitle")||"标题",logo:this.getAttribute("logo"),title:this.getAttribute("title"),subTitle:this.getAttribute("subTitle")};let t="",i="";null==this.options.logo&&null==this.options.title&&null==this.options.subTitle&&(t="height:416px",i="height:100%;border-radius:15px");let e=`\n\t\t\t\t\t<div class="introduction-card" style="${t}">\n\t\t\t\t\t\t<div class="introduction-card-top no-lightbox" style="${i}">\n\t\t\t\t\t\t\t<div class="int-card-info">\n\t\t\t\t\t\t\t\t<div class="int-tip">${this.options.tip}</div>\n\t\t\t\t\t\t\t\t<div class="int-cardTitle">${this.options.cardTitle}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<img src="${this.options.img}" alt="introduction">\n\n\t\t\t\t\t\t</div>\n\t\t\t\t`;null!=this.options.logo&&null!=this.options.title&&null!=this.options.subTitle&&(e+=`\n\t\t\t\t\t\n\t\t\t\t\t\t<div class="introduction-card-bottom">\n\t\t\t\t\t\t\t<div class="left no-lightbox">\n\t\t\t\t\t\t\t\t<img src="${this.options.logo}" alt="introduction">\n\t\t\t\t\t\t\t\t<div class="info">\n\t\t\t\t\t\t\t\t\t<div class="title">${this.options.title}</div>\n\t\t\t\t\t\t\t\t\t<div class="subTitle">${this.options.subTitle}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="right">\n\t\t\t\t\t\t\t\t<a href="${this.options.link}" tableindex="-1" class="no-text-decoration">前往</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n                    `),e+="\n\t\t\t\t   </div>\n\t\t\t\t",this.innerHTML=e}}),customElements.define("folding",class extends HTMLElement{constructor(){super(),this.options={title:this.getAttribute("title"),color:this.getAttribute("color")||"",type:this.getAttribute("type")||""};let t=getChildren(this,"_tpl").innerHTML.trim().replace(/^(<br>)|(<br>)$/g,""),i=`\n                <details class="folding-tag" ${this.options.color} ${this.options.type}>\n                    <summary>${this.options.title}</summary>\n                    <div class="content">\n                       ${t}\n                    </div>\n                </details>\n            `;this.innerHTML=i}}),customElements.define("tag-link",class extends HTMLElement{constructor(){super(),this.options={link:this.getAttribute("link"),logo:this.getAttribute("logo")||"",title:this.getAttribute("title")||"",described:this.getAttribute("described")||""};let t='\n                <div class="tag-link-left">\n                    <i class="icon-link"></i>\n                </div>';null!=this.options.logo&&""!=this.options.logo&&(t=`\n                    <div class="tag-link-left"\n                        style="background-image:url(${this.options.logo})">\n                    </div>`);let i=`\n\t\t\t\t<div calss="tag-link">\n\t\t\t\t\t<a class="tag-Link" target="_blank"\n\t\t\t\t\t\thref="${this.options.link}" rel="external nofollow noreferrer"\n\t\t\t\t\t\tdraggable="false">\n\t\t\t\t\t\t<div class="tag-link-tips">引用站外地址</div>\n\t\t\t\t\t\t<div class="tag-link-bottom">\n                            ${t}\n\t\t\t\t\t\t\t<div class="tag-link-right">\n\t\t\t\t\t\t\t\t<div class="tag-link-title">${this.options.title}</div>\n\t\t\t\t\t\t\t\t<div class="tag-link-sitename">${this.options.described}</div>\n\t\t\t\t\t\t\t</div><i class="icon-angle-right"></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n            `;this.innerHTML=i}}),customElements.define("note",class extends HTMLElement{constructor(){super(),this.options={class:this.getAttribute("class")||"",noIcon:this.getAttribute("noIcon")||"",style:this.getAttribute("style")||""};let t=`\n\t\t\t\t<div class="note ${this.options.class} ${this.options.noIcon} ${this.options.style}">${this.innerHTML.trim().replace(/^(<br>)|(<br>)$/g,"")}</div>\n            `;this.innerHTML=t}}),customElements.define("tip",class extends HTMLElement{constructor(){super(),this.options={class:this.getAttribute("class")||"info",noIcon:this.getAttribute("noIcon")||""};let t=`\n\t\t\t\t<div class="tip ${this.options.class} ${this.options.noIcon}">${this.innerHTML.trim().replace(/^(<br>)|(<br>)$/g,"")}</div>\n            `;this.innerHTML=t}}),customElements.define("timeline",class extends HTMLElement{constructor(){super(),this.options={title:this.getAttribute("title")||"",color:this.getAttribute("color")||""};let t=getChildren(this,"_tpl").innerHTML.trim().replace(/^(<br>)|(<br>)$/g,""),i="";t.replace(/{timeline-item([^}]*)}([\s\S]*?){\/timeline-item}/g,(function(t,e,s){i+=`\n\t\t\t\t\t<div class="timeline-item">\n\t\t\t\t\t\t<div class="timeline-item-title">\n\t\t\t\t\t\t<div class="item-circle">\n\t\t\t\t\t\t\t<p>${e}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="timeline-item-content">\n\t\t\t\t\t\t${s.trim().replace(/^(<br>)|(<br>)$/g,"")}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\n\t\t\t\t`}));let e=`\n\n\t\t\t\t\t<div class="timeline ${this.options.color}">\n\t\t\t\t\t\t<div class="timeline-item headline">\n\t\t\t\t\t\t\t<div class="timeline-item-title">\n\t\t\t\t\t\t\t<div class="item-circle">\n\t\t\t\t\t\t\t\t<p>${this.options.title}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${i}\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\n\t\t\t\t`;this.innerHTML=e}}),customElements.define("btns",class extends HTMLElement{constructor(){super(),this.options={class:this.getAttribute("class")||"",style:this.getAttribute("style")||"",grid:this.getAttribute("grid")||""};let t=getChildren(this,"_tpl").innerHTML.trim().replace(/^(<br>)|(<br>)$/g,""),i="";"rounded"==this.options.class&&t.replace(/{([^}]*)}/g,(function(t,e){var s=e.split(",",5);5==s.length?i+=`\n\t\t\t\t\t\t\t\t\t<a target="_blank" rel="noopener external nofollow noreferrer"\n\t\t\t\t\t\t\t\t\t\thref="${s[2]}"\n\t\t\t\t\t\t\t\t\t\tclass="no-text-decoration"><i class="${s[4]}"></i> <b>${s[0]}</b>\n\t\t\t\t\t\t\t\t\t\t<p class="p red">${s[1]}</p><img\n\t\t\t\t\t\t\t\t\t\t\tsrc="${s[3]}">\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t`:i+=`\n\t\t\t\t\t\t\t\t<a class="button no-text-decoration" href="${s[1]}" title="${s[0]}">\n\t\t\t\t\t\t\t\t\t<i class="${s[2]}"></i> ${s[0]}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t`})),"circle"==this.options.class&&t.replace(/{([^}]*)}/g,(function(t,e){var s=e.split(",",5);5==s.length?i+=`\n\t\t\t\t\t\t\t\t\t<a target="_blank" rel="noopener external nofollow noreferrer"\n\t\t\t\t\t\t\t\t\t\thref="${s[2]}"\n\t\t\t\t\t\t\t\t\t\tclass="no-text-decoration"><i class="${s[4]}"></i> <b>${s[0]}</b>\n\t\t\t\t\t\t\t\t\t\t<p class="p red">${s[1]}</p><img\n\t\t\t\t\t\t\t\t\t\t\tsrc="${s[3]}">\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t`:i+=`\n\t\t\t\t\t\t\t\t\t<a class="button no-text-decoration" target="_blank" rel="noopener external nofollow noreferrer"\n\t\t\t\t\t\t\t\t\t\thref="${s[1]}" title="${s[0]}">\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tsrc="${s[2]}"/>${s[0]}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t`}));let e=`\n\t\t\t\t\t<div class="btns ${this.options.class} ${this.options.style} ${this.options.grid}">\n\t\t\t\t\t\t${i}\n\t\t\t\t\t</div>\n\t\t\t\t`;this.innerHTML=e}}),customElements.define("gallery-group",class extends HTMLElement{constructor(){super();let t=getChildren(this,"_tpl").innerHTML.trim().replace(/^(<br>)|(<br>)$/g,""),i="";t.replace(/{([^}]*)}/g,(function(t,e){var s=e.split(",",4);i+=`\n\t\t\t\t\t\t\t<figure class="gallery-group no-lightbox group-two"">\n\t\t\t\t\t\t\t\t<img class="gallery-group-img" \n\t\t\t\t\t\t\t\tsrc="${s[3]}" \n\t\t\t\t\t\t\t\talt="Group Image Gallery" >\n\t\t\t\t\t\t\t\t<figcaption>\n\t\t\t\t\t\t\t\t\t<div class="gallery-group-name">${s[0]}</div>\n\t\t\t\t\t\t\t\t\t<p>${s[1]}</p><a target="_blank" rel="noopener" href="${s[2]}"></a>\n\t\t\t\t\t\t\t\t</figcaption>\n\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t`}));let e=`\n\t\t\t\t    <div class="gallery-group-main">\n\t\t\t\t\t   ${i}\n\t\t\t\t\t</div>\n\t\t\t\t`;this.innerHTML=e}}),customElements.define("gallery",class extends HTMLElement{constructor(){super();let t=getChildren(this,"_tpl").innerHTML.trim().replace(/^(<br>)|(<br>)$/g,""),i="";t.replace(/{([^}]*)}/g,(function(t,e){e.split(",").forEach((t=>{i+=`\n\t\t\t\t\t\t\t\t<div class="fj-gallery-item">\n\t\t\t\t\t\t\t\t\t<img src="${t}">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`}))}));let e=`\n\t\t\t\t\t<section class="page-1 loadings">\n\t\t\t\t\t\t<div class="type-gallery ">\n\t\t\t\t\t\t\t<div class="gallery">\n\t\t\t\t\t\t\t\t\t${i}\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t`;this.innerHTML=e}}),customElements.define("flink",class extends HTMLElement{constructor(){super(),this.options={name:this.getAttribute("name"),desc:this.getAttribute("desc"),style:this.getAttribute("style")};let t=getChildren(this,"_tpl").innerHTML.trim().replace(/^(<br>)|(<br>)$/g,""),i=this.options.style,e="",s="",n="";t.replace(/{([^}]*)}/g,(function(t,e){var n=e.split(",",5);"beautify"==i&&(s+=`\n                                <div class="site-card">\n                                    <a class="img" target="_blank" href="${n[1]}" title="${n[0]}">\n                                        <img class="flink-avatar entered loaded" style="pointer-events: none;" alt="${n[0]}" src="${n[4]||n[2]}" >\n                                    </a>\n\n                                    <a class="info cf-friends-link" target="_blank" href="${n[1]}" title="${n[0]}">\n                                        <div class="site-card-avatar no-lightbox">\n                                            <img class="flink-avatar cf-friends-avatar" alt="${n[0]}" src="${n[2]}">\n                                        </div>\n                                        <div class="site-card-text">\n                                            <span class="title cf-friends-name">${n[0]}</span>\n                                            <span class="desc" title="${n[3]}">${n[3]}</span>\n                                        </div>\n                                    </a>\n                                </div>\n                            `),"default"==i&&(s+=`\n                                <div class="flink-list-item">\n                                    <a class="cf-friends-link" rel="external nofollow" target="_blank" href="${n[1]}" title="${n[0]}">\n                                        <img class="flink-avatar cf-friends-avatar" alt="${n[0]}" src="${n[2]}">\n                                        <div class="flink-item-info no-lightbox">\n                                            <span class="flink-item-name cf-friends-name">${n[0]}</span>\n                                            <span class="flink-item-desc" title="${n[3]}">${n[3]}</span>\n                                            <img src="${n[2]}">\n                                        </div>\n                                    </a>\n                                </div>\n                            `)})),null!=this.options.desc&&""!=this.options.desc&&(n=`\n                     <div class="flink-desc">${this.options.desc}</div>\n                    `),"beautify"==this.options.style&&(e=`\n                        <div class="site-card-group">\n                          ${s}\n                        </div>\n                    `),"default"==this.options.style&&(e=`\n                        <div class="flink-list">\n                           ${s}\n                        </div>\n                    `);let l=`\n                    <div class="flink" id="article-container">\n                       <div class="flink-name">${this.options.name}</div>\n\t\t\t\t\t   ${n}\n                       ${e}\n\t\t\t\t\t</div>\n\t\t\t\t`;this.innerHTML=l}}),customElements.define("checkbox",class extends HTMLElement{constructor(){super(),this.options={class:this.getAttribute("class")||"",colour:this.getAttribute("colour")||"",status:this.getAttribute("status")||""};let t=`\n                <div class="checkbox ${this.options.class} ${this.options.colour} ${this.options.status}"><input type="checkbox" ${this.options.status}><p>${this.innerHTML.trim().replace(/^(<br>)|(<br>)$/g,"")}</p></div>\n            `;this.innerHTML=t}}),customElements.define("tag-hide",class extends HTMLElement{constructor(){super(),this.options={display:this.getAttribute("display")||"查看",bg:this.getAttribute("bg")||"",color:this.getAttribute("color")||""};let t=`\n                    <span class="hide-inline">\n                        <button type="button" class="hide-button" style="background-color:${this.options.bg};color:${this.options.color}">\n                        ${this.options.display}<br>\n                        </button>\n                        <span class="hide-content">${this.innerHTML.trim().replace(/^(<br>)|(<br>)$/g,"")}</span>\n                    </span>\n                `;this.innerHTML=t}}),customElements.define("dplayer",class extends HTMLElement{constructor(){super(),this.options={src:this.getAttribute("src")||"",player:this.getAttribute("player")||"/themes/theme-hao/assets/libs/dplayer/dplayer.html?url=",width:this.getAttribute("width")||"100%",height:this.getAttribute("height")||"500px"},this.render()}render(){this.options.src?this.innerHTML=`<iframe allowfullscreen="true" class="vplayer" src="${this.options.player+this.options.src}" style="width:${this.options.width};height:${this.options.height}"></iframe>`:this.innerHTML="视频地址未填写！"}})}));