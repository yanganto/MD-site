!function(){function e(){btf.snackbarShow(""),Snackbar.show({text:"为了保护访客访问安全，本站已停止对你正在使用的过低版本浏览器的支持",actionText:"关闭",duration:"6000",pos:"bottom-right"})}function t(){let e=document.documentElement.scrollTop||window.pageYOffset,n=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-document.documentElement.clientHeight,o=Math.round(e/n*100),i=document.querySelector("#percent");var d=window.scrollY+document.documentElement.clientHeight,s=document.getElementById("post-comment")||document.getElementById("footer");s.offsetTop+s.offsetHeight/2<d||o>90?(document.querySelector("#nav-totop").classList.add("long"),i.innerHTML="返回顶部"):(document.querySelector("#nav-totop").classList.remove("long"),o>=0&&(i.innerHTML=o)),endresult=n-e,endresult<100?$(".needEndHide").addClass("hide"):$(".needEndHide").removeClass("hide"),window.onscroll=t}var n,o;"object"!=typeof window.initializationRegistry&&(window.initializationRegistry=new Set),window.isFullLoad=!0,window.runOnce=function(e,t={}){return function(n){return function(){initializationRegistry.has(e)||(initializationRegistry.add(e),t.onlyFullLoad&&!t.isFullLoad||n())}}},window.browserVersion=function(){var t=navigator.userAgent,n=t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1,o=(t.indexOf("Trident")>-1&&t.indexOf("rv:11.0"),t.indexOf("Edge")>-1&&!n),i=t.indexOf("Firefox")>-1,d=t.indexOf("Opera")>-1||t.indexOf("OPR")>-1,s=t.indexOf("Chrome")>-1&&t.indexOf("Safari")>-1&&-1==t.indexOf("Edge")&&-1==t.indexOf("OPR");t.indexOf("Safari")>-1&&-1==t.indexOf("Chrome")&&-1==t.indexOf("Edge")&&t.indexOf("OPR");o?t.split("Edge/")[1].split(".")[0]<90&&e():i?t.split("Firefox/")[1].split(".")[0]<90&&e():d?t.split("OPR/")[1].split(".")[0]<80&&e():s&&t.split("Chrome/")[1].split(".")[0]<90&&e()},window.progressiveLoad=function(e){if(e){var t=function(e,t){const n=e.parentNode;for(let o=0;o<n.children.length;o++){const i=n.children[o];if(i!==e&&i.classList.contains(t))return i}return null}(e,"progressive-thumbnail");t&&t.classList.add("loaded"),e.classList.add("loaded"),e.parentNode.classList.add("loaded")}},1!=(o=new RegExp("(^| )"+"browsertc"+"=([^;]*)(;|$)"),(n=document.cookie.match(o))?unescape(n[2]):null)&&(!function(e,t){let n=new Date((new Date).getTime()+24*t*60*60*1e3).toUTCString();for(let t in e)document.cookie=t+"="+e[t]+";expires="+n}({browsertc:1},1),browserVersion()),document.addEventListener("pjax:click",(function(){GLOBAL_CONFIG.loadProgressBar&&Pace.restart(),GLOBAL_CONFIG.loadingBox&&wjx.showLoading()})),document.addEventListener("scroll",btf.throttle((function(){wjx.initThemeColor()}),200));const i=runOnce("initBlog")((()=>{var e,n;wjx.addNavBackgroundInit(),wjx.darkModeStatus(),wjx.initThemeColor(),GLOBAL_CONFIG.rightMenuEnable&&addRightMenuClickEvent(),t(),e=document.getElementById("toPageText"),n=document.getElementById("toPageButton"),e&&(e.addEventListener("keydown",(e=>{13===e.keyCode&&(wjx.toPage(),pjax.loadUrl(n.href))})),e.addEventListener("input",(function(){""===e.value||"0"===e.value?n.classList.remove("haveValue"):n.classList.add("haveValue");var t=document.querySelectorAll(".page-number"),o=+t[t.length-1].innerHTML;+document.getElementById("toPageText").value>o&&(e.value=o)}))),wjx.topPostScroll(),wjx.sayhi(),wjx.stopImgRightDrag(),GLOBAL_CONFIG.source.tool.switch&&wjx.hidecookie(),wjx.onlyHome(),wjx.initIndexEssay(),wjx.reflashEssayWaterFall(),wjx.topCategoriesBarScroll(),GLOBAL_CONFIG.loadingBox&&wjx.hideLoading(),$(".topGroup").hover((function(){}),(function(){hoverOnCommentBarrage=!1,document.getElementById("topGroup").classList.remove("hideCard"),document.getElementById("topGroup").style.zIndex=1}))}));$(document).ready((function(){i()})),document.addEventListener("pjax:complete",(function(){i(),"function"==typeof window.initBlogLazy&&window.initBlogLazy(),"post"!=GLOBAL_CONFIG.htmlType&&"page"!=GLOBAL_CONFIG.htmlType||void 0===window.renderKaTex||window.renderKaTex()})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("site-name"),t=document.querySelector("#menus .menus_items"),n=document.querySelector("#search-button");let o=e&&e.offsetWidth,i=t&&t.offsetWidth,d=n&&n.offsetWidth;document.getElementById("post-comment")?$("#to_comment").attr("style","display: block"):$("#to_comment").attr("style","display: none"),document.body.scrollHeight<=innerHeight&&($rightside.style.cssText="opacity: 1; transform: translateX(-58px)");const s=(s=!1)=>{s&&(o=e&&e.offsetWidth,i=t&&t.offsetWidth,d=n&&n.offsetWidth);const a=document.getElementById("nav");let l;l=window.innerWidth<768||o+i+d>a.offsetWidth-120,l?a.classList.add("hide-menu"):a.classList.remove("hide-menu")};window.refreshFn=function(){s(),document.getElementById("nav").classList.add("show"),(()=>{const e=document.getElementById("toggle-menu"),t=document.getElementById("sidebar-menus"),n=document.getElementById("menu-mask"),o=document.body;function i(){o.style.overflow="",o.style.paddingRight="",btf.fadeOut(n,.5),t.classList.remove("open")}e.addEventListener("click",(function(){btf.sidebarPaddingR(),o.style.overflow="hidden",btf.fadeIn(n,.5),t.classList.add("open")})),n.addEventListener("click",(e=>{t.classList.contains("open")&&i()})),window.addEventListener("resize",(n=>{btf.isHidden(e)||t.classList.contains("open")&&i()}))})(),GLOBAL_CONFIG.isHome&&(()=>{const e=document.getElementById("scroll-down"),t=document.getElementById("home_top");e&&e.addEventListener("click",(function(){t&&btf.scrollToDest(t.offsetTop,300)}))})()},refreshFn(),window.addEventListener("resize",s),window.addEventListener("orientationchange",(()=>{setTimeout(s(!0),100)}))}))}();